<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Roteiro Cabo Frio 2025</title>
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --blue: #007AFF;
            --orange: #FF9500;
            --green: #34C759;
            --purple: #AF52DE;
            --teal: #5AC8FA;
            --red: #FF3B30;
            --yellow: #FFCC00;
            
            --bg-app: #F2F2F7;
            --bg-card: #FFFFFF;
            --text-primary: #1C1C1E;
            --text-secondary: #8E8E93;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            margin: 0; padding: 0;
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-app);
            color: var(--text-primary);
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* LAYOUT */
        #layout-container { display: flex; flex-direction: column; height: 100%; width: 100%; }
        #map-area { height: 35vh; width: 100%; background: #e5e5e5; z-index: 10; }
        #content-area { flex: 1; overflow-y: auto; padding: 20px; padding-bottom: 100px; scroll-behavior: smooth; }

        @media (min-width: 1024px) {
            #layout-container { flex-direction: row-reverse; }
            #map-area { height: 100vh; width: 55%; }
            #content-area { height: 100vh; width: 45%; padding: 40px; }
            .dock { width: 40% !important; left: 30% !important; }
        }

        /* HEADER & DATE SELECTOR */
        .app-header { margin-bottom: 20px; }
        .app-title { font-size: 1.8rem; font-weight: 800; margin: 0 0 15px 0; letter-spacing: -0.5px; }
        .days-scroller { display: flex; gap: 10px; overflow-x: auto; padding-bottom: 5px; scrollbar-width: none; }
        .day-btn {
            background: var(--bg-card); border: 1px solid rgba(0,0,0,0.05); padding: 12px 24px;
            border-radius: 25px; white-space: nowrap; font-weight: 600; color: var(--text-secondary);
            cursor: pointer; transition: all 0.2s; box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .day-btn.active { background: var(--blue); color: white; box-shadow: 0 4px 12px rgba(0,122,255,0.4); transform: scale(1.05); }

        /* SUMMARY CARD */
        .summary-card {
            background: var(--bg-card); border-radius: 20px; padding: 20px; margin-bottom: 25px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.03);
        }
        .checklist {
            background: #F9F9FB; border-radius: 12px; padding: 15px; margin-top: 15px;
            border-left: 4px solid var(--orange);
        }

        /* EVENT CARD */
        .event-card {
            background: var(--bg-card); border-radius: 18px; padding: 20px; margin-bottom: 20px;
            position: relative; box-shadow: 0 2px 10px rgba(0,0,0,0.04);
            border-left: 5px solid transparent;
        }
        .event-header { display: flex; align-items: flex-start; gap: 15px; margin-bottom: 12px; }
        .event-emoji { 
            font-size: 2.2rem; background: #F2F2F7; width: 55px; height: 55px; 
            display: flex; align-items: center; justify-content: center; border-radius: 50%; flex-shrink: 0;
        }
        .event-time-badge {
            font-size: 0.8rem; font-weight: 700; color: var(--text-primary);
            background: #E5E5EA; padding: 4px 10px; border-radius: 8px; display: inline-block; margin-bottom: 4px;
        }
        .event-title { font-size: 1.25rem; font-weight: 700; margin: 0; line-height: 1.2; }
        .event-desc { font-size: 0.95rem; color: #444; line-height: 1.5; margin-bottom: 12px; }
        
        /* Buttons */
        .buttons-row { display: flex; gap: 8px; flex-wrap: wrap; margin-top: 12px; }
        .btn {
            text-decoration: none; padding: 8px 14px; border-radius: 10px; font-size: 0.85rem; font-weight: 600;
            display: inline-flex; align-items: center; gap: 6px; transition: 0.2s; border: none; cursor: pointer;
        }
        .btn-map { background: rgba(0,122,255,0.1); color: var(--blue); }
        .btn-insta { background: rgba(175, 82, 222, 0.1); color: var(--purple); }
        .btn-wpp { background: rgba(52,199,89,0.1); color: var(--green); }

        /* TIPS BOX */
        .tips-box {
            font-size: 0.85rem; background: #FFF9E6; color: #8a6d3b; padding: 10px;
            border-radius: 8px; margin-top: 10px; border-left: 3px solid var(--yellow);
        }

        /* EXTRAS SECTION */
        .extras-section { margin-top: 40px; margin-bottom: 20px; }
        .extras-title { font-size: 1.1rem; font-weight: 800; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 15px; }
        .extra-card {
            background: rgba(255,255,255,0.6); border: 2px dashed #C7C7CC; border-radius: 16px;
            padding: 15px; margin-bottom: 15px; display: flex; align-items: center; gap: 15px;
        }

        /* MENU VIEW */
        .recipe-card { background: var(--bg-card); border-radius: 18px; overflow: hidden; margin-bottom: 25px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
        .recipe-img { width: 100%; height: 200px; object-fit: cover; }
        .recipe-content { padding: 20px; }
        .step { display: flex; gap: 15px; margin-bottom: 12px; }
        .step-num { background: var(--orange); color: white; width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.8rem; font-weight: bold; flex-shrink: 0; }

        /* DOCK */
        .dock {
            position: fixed; bottom: 25px; left: 50%; transform: translateX(-50%);
            background: rgba(255,255,255,0.9); backdrop-filter: blur(20px);
            padding: 6px; border-radius: 35px; display: flex; gap: 6px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.15); border: 1px solid rgba(0,0,0,0.1); z-index: 1000;
        }
        .dock-item { padding: 12px 28px; border-radius: 30px; font-weight: 600; color: var(--text-secondary); cursor: pointer; transition: 0.3s; }
        .dock-item.active { background: var(--blue); color: white; }
        .hidden { display: none !important; }

    </style>
</head>
<body>

    <div id="layout-container">
        <!-- MAPA -->
        <div id="map-area"></div>

        <!-- CONTE√öDO -->
        <div id="content-area">
            
            <!-- VIEW: ROTEIRO -->
            <div id="view-timeline">
                <div class="app-header">
                    <h1 class="app-title">Trip Cabo Frio üåä</h1>
                    <div class="days-scroller" id="days-container"></div>
                </div>

                <div id="day-content">
                    <!-- Conte√∫do injetado via JS -->
                </div>
            </div>

            <!-- VIEW: MENU -->
            <div id="view-menu" class="hidden">
                <h1 class="app-title">Menu & Receitas üçΩÔ∏è</h1>
                <div id="menu-container"></div>
                
                <h2 style="margin: 30px 0 15px">Bar da Casa üçπ</h2>
                <div class="event-card" style="border-left-color: var(--purple)">
                    <h3 class="event-title">Batida de Maracuj√° Cremosa</h3>
                    <p class="event-desc">1 lata Leite Condensado + 1 medida (lata) de Vodka + 1 medida de Suco Maguary + Gelo. Bater no liquidificador.</p>
                </div>
                <div class="event-card" style="border-left-color: var(--red)">
                    <h3 class="event-title">Balena Fizz</h3>
                    <p class="event-desc">Copo cheio de gelo. 50ml de Balena. Completar com √Ågua T√¥nica. Espremer meio lim√£o taiti.</p>
                </div>
            </div>

        </div>
    </div>

    <div class="dock">
        <div class="dock-item active" onclick="switchTab('timeline')">üìÖ Roteiro</div>
        <div class="dock-item" onclick="switchTab('menu')">üë®‚Äçüç≥ Menu</div>
    </div>

    <!-- Scripts -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script>
        // --- BASE DE DADOS ---
        const homeCoords = [-22.8635, -41.9850]; 

        const db = {
            "29/12": {
                label: "29 Seg",
                color: "var(--blue)",
                mapFocus: [-22.5112, -43.1779],
                zoom: 13,
                summary: "In√≠cio da jornada! Acordamos cedo para render o dia. Foco em aproveitar a vibe hist√≥rica de Petr√≥polis para almo√ßar e quebrar a viagem. √Ä noite, foco total em organizar a casa.",
                bring: "üéí Levar na m√£o: Agasalho leve (Petr√≥polis esfria), √ìculos de sol, Carteira, Playlist baixada.",
                events: [
                    {
                        time: "06:00 - 11:30",
                        title: "Viagem BH -> Petr√≥polis",
                        emoji: "üöó",
                        type: "travel",
                        desc: "Sa√≠da antecipada para evitar tr√¢nsito. Rota via BR-040. Parada t√©cnica r√°pida em Juiz de Fora se necess√°rio.",
                        tips: "Waze ligado. Monitorem o grupo para avisar da sa√≠da.",
                        maps: "https://goo.gl/maps/PetropolisRoute",
                        insta: null
                    },
                    {
                        time: "11:30 - 13:30",
                        title: "Almo√ßo: Cervejaria Bohemia",
                        emoji: "üçª",
                        type: "food",
                        desc: "O maior complexo cervejeiro da regi√£o. O restaurante fica no topo. Comida alem√£ e brasileira.",
                        tips: "Pe√ßam a 'R√©gua de Degusta√ß√£o' e o Croquete de Carne. Estacionamento pr√≥ximo √© pago.",
                        maps: "https://goo.gl/maps/BohemiaPetropolis",
                        insta: "https://www.instagram.com/cervejariabohemia",
                        coords: [-22.5137, -43.1815]
                    },
                    {
                        time: "13:30 - 14:30",
                        title: "Pal√°cio de Cristal & Centro",
                        emoji: "üíé",
                        type: "culture",
                        desc: "Passeio a p√© para fazer a digest√£o. Estrutura de vidro hist√≥rica e jardins.",
                        tips: "√ìtimo para fotos. Entrada gratuita.",
                        maps: "https://goo.gl/maps/CrystalPalace",
                        insta: "https://www.instagram.com/visitepetropolis",
                        coords: [-22.5126, -43.1822]
                    },
                    {
                        time: "14:30 - 15:00",
                        title: "Chocolates Katz",
                        emoji: "üç´",
                        type: "food",
                        desc: "Tradicional chocolataria da serra. Parada estrat√©gica para caf√© e sobremesa.",
                        tips: "O chocolate quente europeu √© famoso. Levem uma barra para a viagem.",
                        maps: "https://goo.gl/maps/KatzChocolates",
                        insta: "https://www.instagram.com/katz_chocolates",
                        coords: [-22.5100, -43.1760]
                    },
                    {
                        time: "15:00 - 18:30",
                        title: "Descida da Serra -> Cabo Frio",
                        emoji: "üõ£Ô∏è",
                        type: "travel",
                        desc: "Trecho final. Aten√ß√£o na Via Lagos.",
                        maps: "https://goo.gl/maps/RouteCF",
                        insta: null
                    },
                    {
                        time: "19:00 - 22:00",
                        title: "Check-in & Jantar",
                        emoji: "üçù",
                        type: "home",
                        desc: "Entrada na casa (Alameda Treze). Limpeza expressa e preparo do Penne R√∫stico.",
                        coords: homeCoords,
                        maps: "https://goo.gl/maps/HomeLocation"
                    }
                ],
                extras: [
                    { title: "Catedral S√£o Pedro", emoji: "‚õ™", desc: "Catedral g√≥tica imponente em Petr√≥polis.", maps: "https://goo.gl/maps/CatedralPetropolis" },
                    { title: "Museu de Cera", emoji: "üóø", desc: "Divertido para fotos, tamb√©m no centro.", maps: "https://goo.gl/maps/WaxMuseum" }
                ]
            },
            "30/12": {
                label: "30 Ter",
                color: "var(--teal)",
                mapFocus: [-22.8680, -42.0280],
                zoom: 12,
                summary: "Dia de abastecimento e relaxamento. Vamos resolver as compras cedo para garantir a praia √† tarde sem pressa.",
                bring: "üõí Sacolas retorn√°veis, Lista de Compras, Cooler com Gelo, Cadeira de praia.",
                events: [
                    {
                        time: "08:30 - 10:30",
                        title: "Mercado Atacad√£o",
                        emoji: "üõí",
                        type: "travel",
                        desc: "Compra grande da semana. Bebidas, carnes para churrasco, itens de caf√© da manh√£.",
                        tips: "Essencial comprar o CARV√ÉO e GELO hoje. Dia 31 acaba tudo na cidade.",
                        maps: "https://goo.gl/maps/AtacadaoCF",
                        insta: null,
                        coords: [-22.8680, -42.0280]
                    },
                    {
                        time: "11:00 - 16:30",
                        title: "Praia do Per√≥",
                        emoji: "üèñÔ∏è",
                        type: "beach",
                        desc: "Praia certificada 'Bandeira Azul'. √Ågua limp√≠ssima e faixa de areia extensa.",
                        tips: "Fiquem pr√≥ximos ao 'Quiosque do Peixe'. Levem o cooler para economizar.",
                        maps: "https://goo.gl/maps/PraiaDoPero",
                        insta: "https://www.instagram.com/explore/locations/236774653/praia-do-pero",
                        coords: [-22.8675, -41.9790]
                    },
                    {
                        time: "13:00 - 14:30",
                        title: "Almo√ßo: Restaurante do Z√©",
                        emoji: "üç§",
                        type: "food",
                        desc: "P√© na areia (quase). Pratos honestos de peixe frito, camar√£o e guarni√ß√µes.",
                        tips: "O prato 'Peixe √† Moda' serve bem 2 pessoas.",
                        maps: "https://goo.gl/maps/RestauranteZePero",
                        insta: null,
                        coords: [-22.8690, -41.9780]
                    },
                    {
                        time: "16:30 - 18:00",
                        title: "P√¥r do Sol: Praia das Conchas",
                        emoji: "üêö",
                        type: "beach",
                        desc: "Caminhada leve (10 min) pelo canto direito do Per√≥ at√© as Conchas.",
                        tips: "Subam no morrinho que divide as duas praias para o melhor visual.",
                        maps: "https://goo.gl/maps/PraiaDasConchas",
                        insta: "https://www.instagram.com/explore/tags/praiadasconchas",
                        coords: [-22.8695, -41.9700]
                    },
                    {
                        time: "20:00 - 00:00",
                        title: "Strogonoff & Games",
                        emoji: "üé≤",
                        type: "home",
                        desc: "Noite de competi√ß√£o: Mario Party, Uno e Baralho. Jantar reconfortante.",
                        tips: "Deixar o Switch carregando durante o dia."
                    }
                ],
                extras: [
                    { title: "Shopping Park Lagos", emoji: "üõçÔ∏è", desc: "Op√ß√£o para noite ou se chover. Muito bonito.", maps: "https://goo.gl/maps/ParkLagos" },
                    { title: "Mirante da Guia", emoji: "‚õ™", desc: "Vista panor√¢mica da cidade no p√¥r do sol.", maps: "https://goo.gl/maps/MorroDaGuia" }
                ]
            },
            "31/12": {
                label: "31 Qua",
                color: "var(--purple)",
                mapFocus: [-22.8850, -42.0190],
                zoom: 13,
                summary: "O Grande Dia! Passeio de barco incr√≠vel pela manh√£, tarde no bairro hist√≥rico e prepara√ß√£o para a virada.",
                bring: "üíä Dramin (se enjoar), Protetor Solar, Toalha, Roupa Branca passada, Champanhe no gelo.",
                events: [
                    {
                        time: "09:00 - 13:00",
                        title: "Passeio de Barco + Mergulho",
                        emoji: "üö§",
                        type: "culture",
                        desc: "Sa√≠da do Boulevard Canal. Passa pela Ilha do Japon√™s, Forte S√£o Mateus (mar) e parada longa na Ilha dos Papagaios.",
                        tips: "Agendar com anteced√™ncia. Levar lanches leves. Visual caribenho.",
                        maps: "https://goo.gl/maps/BoulevardCanal",
                        insta: "https://www.instagram.com/trovaodosmares",
                        wpp: "552299999999",
                        coords: [-22.8850, -42.0190]
                    },
                    {
                        time: "13:30 - 15:30",
                        title: "Almo√ßo: Bairro da Passagem",
                        emoji: "üèòÔ∏è",
                        type: "food",
                        desc: "O 'Centro Hist√≥rico' de Cabo Frio. Charme colonial, ruas de pedra e alta gastronomia.",
                        tips: "Restaurantes recomendados: 'Gal√°pagos' ou 'Escrit√≥rio do Chef'.",
                        maps: "https://goo.gl/maps/PassagemCF",
                        insta: "https://www.instagram.com/bairrodapassagem",
                        coords: [-22.8830, -42.0150]
                    },
                    {
                        time: "17:00 - 22:00",
                        title: "Churrasco Pr√©-Reveillon",
                        emoji: "üî•",
                        type: "home",
                        desc: "In√≠cio dos trabalhos na churrasqueira. Caipirinhas, m√∫sica e prepara√ß√£o.",
                        tips: "Colocar espumante para gelar √†s 20h.",
                        coords: homeCoords
                    },
                    {
                        time: "23:30 - 01:30",
                        title: "Virada na Praia do Per√≥",
                        emoji: "üéÜ",
                        type: "beach",
                        desc: "Fogos na areia perto de casa. Ambiente mais seguro e familiar que a Praia do Forte.",
                        tips: "Vamos a p√© ou de carro (estacionando perto).",
                        maps: "https://goo.gl/maps/PraiaDoPero",
                        coords: [-22.8675, -41.9790]
                    }
                ],
                extras: [
                    { title: "Rua dos Biqu√≠nis", emoji: "üëô", desc: "Shopping a c√©u aberto na Gamboa (na volta do barco).", maps: "https://goo.gl/maps/RuaBiquinis" },
                    { title: "Ilha do Japon√™s", emoji: "üèùÔ∏è", desc: "Acess√≠vel a p√© se mar√© baixa. √Ågua na canela.", maps: "https://goo.gl/maps/IlhaJapones" }
                ]
            },
            "01/01": {
                label: "01 Qui",
                color: "var(--orange)",
                mapFocus: [-22.7780, -41.9050],
                zoom: 12,
                summary: "Bem-vindo a 2025! Dia de explorar B√∫zios com estilo. Praia badalada e fim de tarde na Orla Bardot.",
                bring: "üï∂Ô∏è √ìculos escuros, Canga, Roupa mais arrumada para o fim de tarde/noite.",
                events: [
                    {
                        time: "10:00 - 10:40",
                        title: "Ida para B√∫zios",
                        emoji: "üöò",
                        type: "travel",
                        desc: "Caminho pela Rasa/Manguinhos. Evita o centro de Cabo Frio.",
                        maps: "https://goo.gl/maps/RouteBuzios",
                        coords: [-22.7750, -41.9100]
                    },
                    {
                        time: "11:00 - 16:00",
                        title: "Praia de Gerib√°",
                        emoji: "üåä",
                        type: "beach",
                        desc: "A praia mais famosa. Ondas, gente bonita e estrutura de beach clubs (Fishbone).",
                        tips: "Estacionar √© dif√≠cil e caro. Procurem ruas laterais ou paguem o estacionamento (R$ 30-50) pela paz.",
                        maps: "https://goo.gl/maps/PraiaGeriba",
                        insta: "https://www.instagram.com/explore/locations/215367623/praia-de-geriba",
                        coords: [-22.7780, -41.9050]
                    },
                    {
                        time: "16:30 - 19:00",
                        title: "Rua das Pedras & Orla Bardot",
                        emoji: "üö∂",
                        type: "culture",
                        desc: "Passeio cl√°ssico. Lojas de grife, est√°tua da Brigitte Bardot e sorveterias.",
                        tips: "Parada obrigat√≥ria no 'Chez Michou' para comer crepe.",
                        maps: "https://goo.gl/maps/RuaDasPedras",
                        insta: "https://www.instagram.com/chezmichou.buzios",
                        coords: [-22.7540, -41.8880]
                    },
                    {
                        time: "18:00 - 19:00",
                        title: "P√¥r do Sol: Porto da Barra",
                        emoji: "üåÖ",
                        type: "beach",
                        desc: "P√≠er gastron√¥mico em Manguinhos. O visual do sol caindo nos barcos √© lindo.",
                        maps: "https://goo.gl/maps/PortoDaBarra",
                        coords: [-22.7650, -41.9200]
                    },
                    {
                        time: "21:00 - 23:00",
                        title: "Jantar: Lasanha",
                        emoji: "üßÄ",
                        type: "home",
                        desc: "Recupera√ß√£o p√≥s-sol. Lasanha no forno e descanso.",
                        coords: homeCoords
                    }
                ],
                extras: [
                    { title: "Praia da Ferradurinha", emoji: "üê¢", desc: "Ao lado de Gerib√°. Pequena e calma. Aluguel de caiaque.", maps: "https://goo.gl/maps/Ferradurinha" },
                    { title: "Gran Cine Bardot", emoji: "üé¨", desc: "Cinema hist√≥rico e charmoso no centro.", maps: "https://goo.gl/maps/CineBardot" }
                ]
            },
            "02/01": {
                label: "02 Sex",
                color: "var(--green)",
                mapFocus: [-22.8835, -42.0090],
                zoom: 13,
                summary: "Dia de despedida do mar. Vamos conhecer o cart√£o postal (Forte) e comer bem no canal antes de encerrar.",
                bring: "üì∏ C√¢mera carregada, Dinheiro trocado para feirinha.",
                events: [
                    {
                        time: "09:30 - 11:30",
                        title: "Forte S√£o Mateus",
                        emoji: "üè∞",
                        type: "culture",
                        desc: "Constru√ß√£o hist√≥rica de 1616. A melhor vista da Praia do Forte.",
                        tips: "Cuidado com as pedras se a mar√© estiver alta.",
                        maps: "https://goo.gl/maps/ForteSaoMateus",
                        insta: "https://www.instagram.com/explore/locations/234479633/forte-sao-mateus",
                        coords: [-22.8835, -42.0090]
                    },
                    {
                        time: "11:30 - 13:30",
                        title: "Praia das Dunas",
                        emoji: "üèúÔ∏è",
                        type: "beach",
                        desc: "Continua√ß√£o da Praia do Forte. Menos cheia, com dunas brancas enormes.",
                        tips: "√ìtimo para o √∫ltimo mergulho. √Ågua gelada e revigorante.",
                        maps: "https://goo.gl/maps/PraiaDasDunas",
                        insta: null,
                        coords: [-22.8950, -42.0250]
                    },
                    {
                        time: "14:00 - 15:30",
                        title: "Almo√ßo: Tia Maluca",
                        emoji: "ü•ò",
                        type: "food",
                        desc: "Restaurante tradicional no Boulevard Canal. Famoso pelas Moquecas.",
                        tips: "Pratos bem servidos, pre√ßo justo.",
                        maps: "https://goo.gl/maps/TiaMaluca",
                        insta: "https://www.instagram.com/tiamalucarestaurante",
                        coords: [-22.8840, -42.0180]
                    },
                    {
                        time: "16:00 - 17:30",
                        title: "Feirinha de Artesanato",
                        emoji: "üíç",
                        type: "culture",
                        desc: "Na pra√ßa em frente ao teatro. Lembrancinhas e biqu√≠nis.",
                        maps: "https://goo.gl/maps/FeirinhaCF",
                        coords: [-22.8820, -42.0160]
                    },
                    {
                        time: "20:00 - 23:00",
                        title: "Burger Artesanal & Despedida",
                        emoji: "üçî",
                        type: "home",
                        desc: "Hamb√∫rguer na chapa, acabar com as bebidas e fechar a conta.",
                        coords: homeCoords
                    }
                ],
                extras: [
                    { title: "Museu do Surf", emoji: "üèÑ", desc: "Maior museu de surf do Brasil. Fica na pra√ßa da feirinha.", maps: "https://goo.gl/maps/MuseuSurf" },
                    { title: "Praia do Foguete", emoji: "üöÄ", desc: "Praia de tombo, √°guas profundas e visual selvagem.", maps: "https://goo.gl/maps/PraiaFoguete" }
                ]
            }
        };

        const recipes = [
            { 
                title: "Penne R√∫stico com Fil√© (29/12)", 
                img: "https://images.unsplash.com/photo-1608219992759-8d74ed8d76eb?w=600&q=80",
                steps: ["Cozinhar 500g de Penne.", "Selar tiras de 600g de Fil√© Mignon.", "Refogar alho e cebola.", "Juntar 2 latas de tomate pelati.", "Misturar tudo."]
            },
            { 
                title: "Strogonoff de Frango (30/12)", 
                img: "https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=600&q=80",
                steps: ["Dourar 1kg frango em cubos.", "Adicionar ketchup e mostarda.", "Desligar fogo.", "Misturar 3 caixas creme de leite desnatado."]
            },
            { 
                title: "Churrasco (31/12)", 
                img: "https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=600&q=80", 
                steps: ["Picanha s√≥ no Sal Grosso.", "Lingui√ßa na brasa m√©dia.", "P√£o de alho nas pontas.", "Vinagrete e Farofa para acompanhar."]
            },
            { 
                title: "Lasanha Simples (01/01)", 
                img: "https://plus.unsplash.com/premium_photo-1664478291780-0c67f5fb15e6?q=80&w=800&auto=format&fit=crop",
                steps: ["Molho bolonhesa caldoso.", "Montar: Molho > Massa > Presunto > Queijo.", "Repetir camadas.", "Forno 40 min."]
            },
            { 
                title: "Burger Artesanal (02/01)", 
                img: "https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=600&q=80",
                steps: ["Carne mo√≠da (fraldinha) 180g por disco.", "Sal e pimenta na hora de grelhar.", "Queijo derretido em cima.", "P√£o selado na manteiga."]
            }
        ];

        // --- L√ìGICA ---
        let map;
        let markers = [];
        let polyline;

        function init() {
            map = L.map('map-area', { zoomControl: false }).setView(homeCoords, 13);
            L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', { attribution: '' }).addTo(map);

            const menuContainer = document.getElementById('menu-container');
            recipes.forEach(r => {
                menuContainer.innerHTML += `
                    <div class="recipe-card">
                        <img src="${r.img}" class="recipe-img">
                        <div class="recipe-content">
                            <h3 style="margin:0 0 10px 0">${r.title}</h3>
                            ${r.steps.map((s, i) => `<div class="step"><div class="step-num">${i+1}</div><div style="font-size:0.9rem; line-height:1.4">${s}</div></div>`).join('')}
                        </div>
                    </div>`;
            });
            renderDays();
        }

        function renderDays() {
            const container = document.getElementById('days-container');
            const dates = Object.keys(db);
            dates.forEach((date, i) => {
                const btn = document.createElement('div');
                btn.className = `day-btn ${i===0 ? 'active' : ''}`;
                btn.innerText = db[date].label;
                btn.onclick = () => loadDay(date, btn);
                container.appendChild(btn);
            });
            loadDay(dates[0]);
        }

        function loadDay(date, btn) {
            if(btn) { document.querySelectorAll('.day-btn').forEach(b => b.classList.remove('active')); btn.classList.add('active'); }
            const data = db[date];
            const content = document.getElementById('day-content');
            
            if(polyline) map.removeLayer(polyline);
            markers.forEach(m => map.removeLayer(m));
            markers = [];
            const routePoints = [];

            let html = `
                <div class="summary-card">
                    <div class="summary-title">RESUMO</div>
                    <div class="summary-text">${data.summary}</div>
                    <div class="checklist"><h4>üéí N√ÉO ESQUECER</h4><p>${data.bring}</p></div>
                </div>`;

            data.events.forEach(ev => {
                const typeColors = { 'travel': 'var(--blue)', 'food': 'var(--orange)', 'beach': 'var(--teal)', 'home': 'var(--green)', 'culture': 'var(--purple)' };
                const borderColor = typeColors[ev.type];

                let btns = '';
                if(ev.maps) btns += `<a href="${ev.maps}" target="_blank" class="btn btn-map">üó∫Ô∏è Maps</a>`;
                if(ev.insta) btns += `<a href="${ev.insta}" target="_blank" class="btn btn-insta">üì∏ Insta</a>`;
                if(ev.wpp) btns += `<a href="https://wa.me/${ev.wpp}" target="_blank" class="btn btn-wpp">üí¨ Zap</a>`;

                html += `
                    <div class="event-card" style="border-left-color: ${borderColor}">
                        <div class="event-header">
                            <div class="event-emoji">${ev.emoji}</div>
                            <div style="flex:1">
                                <div class="event-time-badge">${ev.time}</div>
                                <h3 class="event-title">${ev.title}</h3>
                            </div>
                        </div>
                        <div class="event-desc">${ev.desc}</div>
                        ${ev.tips ? `<div class="tips-box">üí° <b>Dica:</b> ${ev.tips}</div>` : ''}
                        <div class="buttons-row">${btns}</div>
                    </div>`;

                if(ev.coords) {
                    if(routePoints.length === 0 && ev.type !== 'travel' && !ev.title.includes("Sa√≠da")) routePoints.push(homeCoords);
                    routePoints.push(ev.coords);
                    const m = L.marker(ev.coords, { icon: L.divIcon({ className: '', html: `<div style="background:${borderColor}; width:16px; height:16px; border-radius:50%; border:2px solid white; box-shadow:0 2px 5px rgba(0,0,0,0.3)"></div>` }) }).addTo(map).bindPopup(ev.title);
                    markers.push(m);
                }
            });

            if(data.extras) {
                html += `<div class="extras-section"><div class="extras-title">‚ú® 2 Op√ß√µes Extras</div>`;
                data.extras.forEach(ex => {
                    html += `
                        <div class="extra-card">
                            <div style="font-size:1.8rem">${ex.emoji}</div>
                            <div style="flex:1">
                                <div style="font-weight:700">${ex.title}</div>
                                <div style="font-size:0.85rem; color:#666">${ex.desc}</div>
                                <div style="margin-top:5px"><a href="${ex.maps}" target="_blank" class="btn btn-map" style="font-size:0.75rem; padding:4px 8px">üó∫Ô∏è Ver Local</a></div>
                            </div>
                        </div>`;
                });
                html += `</div>`;
            }

            content.innerHTML = html;
            content.scrollTop = 0;

            if(routePoints.length > 1) {
                polyline = L.polyline(routePoints, { color: data.color, weight: 4, opacity: 0.7, dashArray: '5, 10' }).addTo(map);
                map.fitBounds(polyline.getBounds(), { padding: [50, 50] });
            } else {
                map.setView(data.mapFocus || homeCoords, data.zoom);
            }
        }

        function switchTab(tab) {
            document.querySelectorAll('.dock-item').forEach(i => i.classList.remove('active'));
            event.currentTarget.classList.add('active');
            if(tab === 'timeline') {
                document.getElementById('view-timeline').classList.remove('hidden');
                document.getElementById('view-menu').classList.add('hidden');
                setTimeout(() => map.invalidateSize(), 100);
            } else {
                document.getElementById('view-timeline').classList.add('hidden');
                document.getElementById('view-menu').classList.remove('hidden');
            }
        }

        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>